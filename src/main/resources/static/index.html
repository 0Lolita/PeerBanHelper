<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PeerBanHelper 状态页</title>
    <script src="js/main.js"></script>
    <link href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/5.1.3/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
    <script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/5.1.3/js/bootstrap.bundle.min.js" type="application/javascript"></script>
</head>
<body>

<main>
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a href="/"
               class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
                <span class="fs-4">PeerBanHelper</span>
            </a>

            <ul class="nav nav-pills">
                <li class="nav-item"><a href="#" class="nav-link active" aria-current="page">状态</a></li>
                <!--                <li class="nav-item"><a href="#" class="nav-link">Features</a></li>-->
            </ul>
        </header>
    </div>

    <div class="container">
        <p>此页面展示 PeerBanHelper 自启动以来的基本数据。请注意，此功能仍在施工中，目前记录和展示的数据较为有限。</p>
        <div style="display: inline-flex; column-gap: 5px">
                <span id="view-data-summary">
                    <i>正在请求 PeerBanHelper WebAPI 以更新数据……</i>
                </span>
            <input type="checkbox" id="auto-refresh" checked><label for="auto-refresh">启用自动刷新</label>
        </div>
        <hr>
        <h2>下载器状态</h2>
        <div id="view-clientstatus">
            等待数据加载……
        </div>
        <h2>封禁名单</h2>
        <div id="view-bancounter">
            等待数据加载……
        </div>
        <div id="view-banlist">
            等待数据加载……
        </div>
    </div>
</main>

<script>
    function executeUpdate() {
        updateViews();
        document.getElementById("view-data-summary").innerHTML = `⏰最后更新于：${stdTime(new Date())}`
    }

    setInterval(() => {
        if (document.getElementById("auto-refresh").checked) {
            executeUpdate();
        }
    }, 3000);
    executeUpdate();
</script>
</body>
</html>